\nimport * as functions from "firebase-functions";\nimport fetch from "cross-fetch";\n\nexport const solve = functions.https.onRequest(async (req, res) => {\n  res.set("Access-Control-Allow-Origin", "*");\n  res.set("Access-Control-Allow-Headers", "Content-Type");\n  if (req.method === "OPTIONS") return res.status(204).send("");\n\n  try {\n    const body = typeof req.body === "string" ? JSON.parse(req.body) : req.body;\n    const { bot, task } = body || {};\n    if (!bot || !task) return res.status(400).json({ error: "bot and task required" });\n\n    const runUrl = (functions.config()?.run?.url as string) || process.env.RUN_URL || "http://localhost:8080";\n    const r = await fetch(`${runUrl}/solve`, {\n      method: "POST",\n      headers: { "Content-Type": "application/json" },\n      body: JSON.stringify({ bot, task })\n    });\n    const data = await r.json();\n    return res.status(r.status).json(data);\n  } catch (e: any) {\n    return res.status(500).json({ error: String(e) });\n  }\n});\n
